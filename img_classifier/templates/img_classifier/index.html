{% extends "home/base_bootstrap.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% load cloudinary %}

{% block title %}Image Classifier{% endblock title %}

{% block head %}
  <!-- Custom CSS -->
  <link rel="stylesheet" href="{% static 'img_classifier/css/styles.css' %}" type="text/css">
{% endblock %}

{% block navbar %}
<nav class="navbar navbar-light bg-light fixed-top">
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="navbar-brand" href="{% url 'home:main' %}">Portfolio</a>
        </li>
    </ul>
    <ul class="navbar-nav mr-4">
        <li class="nav-item">
            <a class="nav-link text-dark" href="#">Login</a>
        </li>
    </ul>
</nav>
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row mt-5 pt-5 d-flex align-items-center justify-content-center">
            <div class="mx-3">
                <img src="{% static 'img_classifier\images\icon-2.png' %}" height="70px" width="70px">
            </div>
            <h1 class="text-center text-white">Image Classifier</h1>
            <div class="mx-3">
                <img src="{% static 'img_classifier\images\icon-3.png' %}" height="70px" width="70px">
            </div>
        </div>
        <div class="row mt-4 py-4">
            <div class="col bg-light border border-dark rounded pt-2">
                <p>This Computer Vision projects uses pre-trained model VGG16 to classify user uploaded images between a total of 1,000 clases. VGG model uses Convolutional Neural Networks (CNN) to extract features from a large image dataset. Along with the prediction label, you can see the probability of the image corresponding to the displayed label.</p>
                <p>Implemented through Keras framework, images hosted in Cloudinary.</p>
                <div class="d-flex align-items-center justify-content-center pb-4 img-form">
                    <form method="POST" enctype="multipart/form-data" class="form-control bg-light img-form">
                        {% csrf_token %}
                        <div class="shadow-lg mx-auto">
                            {{ form|crispy }}
                        </div>
                        <div class="d-flex justify-content-center">
                            <button class="btn btn-info upload-btn" type="submit">Upload</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="col col-sm-6 offset-sm-3">
            {% if images %}        
                {% for image in images %}
                <div class="row d-flex justify-content-center py-2">
                    <div class="card bg-light border-dark shadow-lg text-center w-100 predicted-img">
                        <img src="{{ image.image.url }}" class="img-thumbnail" />
                        <div class="card-body">
                            <h6 class="card-title">{{ image.prediction_label }} ({{ image.prediction_value }} %)</h6>
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% endif %}
        </div>
    </div>
 
    <div class="footer">Icons made by <a href="https://www.freepik.com" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a>
    </div>
{% endblock content %}


{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/noframework.waypoints.min.js" integrity="sha512-fHXRw0CXruAoINU11+hgqYvY/PcsOWzmj0QmcSOtjlJcqITbPyypc8cYpidjPurWpCnlB8VKfRwx6PIpASCUkQ==" crossorigin="anonymous"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/shortcuts/infinite.min.js"></script>
{% endblock scripts %}

